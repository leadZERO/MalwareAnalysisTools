import os
import hashlib

class mwrepo:
	basePath = ''

	def __init__(self, basePath):
		if not os.path.exists(basePath):
			raise 'Bad path'
		self.basePath = basePath

	def sha1exists(self, sha1):
		return os.path.isfile(os.path.join(self.basePath, sha1))

	def contentexists(self, content):
		sha1 = hashlib.sha1(content).hexdigest()
		return os.path.isfile(os.path.join(self.basePath, sha1))

	def savefile(self, content):
		sha1 = hashlib.sha1(content).hexdigest()

		with open(os.path.join(self.basePath, sha1), 'wb') as f:
			f.write(content)
